<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Code Spec Blueprint</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals -->
    <!-- Application Structure Plan: The application is designed as a thematic, single-page scrollable journey. It starts with a high-level introduction, presents the 'Problem' (development chaos) with an interactive diagram, introduces the 'Solution' (the Code Spec) with detailed, clickable component cards, visualizes the ideal 'Ecosystem' flow, and concludes with an interactive chart showing the 'Benefits'. This top-down, narrative structure was chosen to make a complex, abstract software engineering concept tangible and easy to grasp. It guides the user from understanding the 'why' to the 'what' and 'how', promoting exploration over a rigid, linear reading experience. -->
    <!-- Visualization & Content Choices: 
        1. Problem Diagram: Report Info -> Disconnected development artifacts. Goal -> Organize/Show relationships. Viz -> HTML/CSS diagram. Interaction -> Hover over artifacts to see descriptions. Justification -> Visually represents the complexity in a simple, interactive way. Method -> HTML/Tailwind.
        2. Spec Components: Report Info -> A spec has multiple facets. Goal -> Inform/Organize. Viz -> Interactive cards. Interaction -> Click to reveal details. Justification -> Breaks down the core concept into digestible, explorable pieces. Method -> HTML/JS.
        3. Ecosystem Flow: Report Info -> Ideal information flow. Goal -> Organize/Show relationships. Viz -> HTML/CSS flowchart. Interaction -> Click flow stages to get contextual info. Justification -> Contrasts the chaotic 'Problem' diagram with a clean, ideal process. Method -> HTML/JS.
        4. Benefits Chart: Report Info -> Using a spec is beneficial. Goal -> Compare. Viz -> Bar Chart. Interaction -> Toggle between 'Before' and 'After' spec adoption. Justification -> Provides a quantitative, impactful visualization of the spec's value. Library -> Chart.js.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDFBF8;
            color: #383838;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link.active {
            color: #D97706; 
            border-bottom-color: #D97706;
        }
        .flow-node {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .flow-node:hover, .flow-node.active {
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            background-color: #FEF3C7;
        }
        .component-card {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .component-card:hover {
            transform: scale(1.03);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="antialiased">
    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl font-bold text-amber-600">The Code Spec Blueprint</h1>
            <div class="hidden md:flex space-x-8">
                <a href="#intro" class="nav-link text-gray-600 hover:text-amber-600 border-b-2 border-transparent pb-1">Introduction</a>
                <a href="#problem" class="nav-link text-gray-600 hover:text-amber-600 border-b-2 border-transparent pb-1">The Problem</a>
                <a href="#solution" class="nav-link text-gray-600 hover:text-amber-600 border-b-2 border-transparent pb-1">The Solution</a>
                <a href="#benefits" class="nav-link text-gray-600 hover:text-amber-600 border-b-2 border-transparent pb-1">Benefits</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-6 py-12">
        <section id="intro" class="text-center min-h-[60vh] flex flex-col justify-center items-center">
            <h2 class="text-4xl md:text-6xl font-bold tracking-tight mb-4">Building a Single Source of Truth</h2>
            <p class="text-lg md:text-xl text-gray-600 max-w-3xl">
                How do we create a blueprint with enough fidelity to reliably serve as the contract between an application's concept and its deployed code? This is the role of the <span class="font-semibold text-amber-700">Code Specification</span>.
            </p>
        </section>

        <section id="problem" class="py-16">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">The Problem: A Fractured Landscape</h3>
                <p class="text-gray-600 max-w-3xl mx-auto">Without a central blueprint, development artifacts become a tangled web of dependencies. Product requirements, designs, and tasks often drift apart, leading to confusion, rework, and a codebase that diverges from the original intent.</p>
            </div>
            <div class="w-full bg-white rounded-lg shadow-lg p-8 flex flex-col items-center justify-center space-y-8 lg:space-y-0 lg:flex-row lg:space-x-12">
                <div class="flex flex-wrap gap-4 justify-center items-center max-w-md">
                    <div class="artifact group relative bg-blue-100 text-blue-800 p-3 rounded-lg shadow">PRD Doc</div>
                    <div class="artifact group relative bg-purple-100 text-purple-800 p-3 rounded-lg shadow">Figma Design</div>
                    <div class="artifact group relative bg-green-100 text-green-800 p-3 rounded-lg shadow">API Spec</div>
                    <div class="artifact group relative bg-yellow-100 text-yellow-800 p-3 rounded-lg shadow">User Stories</div>
                    <div class="artifact group relative bg-red-100 text-red-800 p-3 rounded-lg shadow">Emails & Slack</div>
                </div>
                <div class="text-5xl text-gray-400 font-thin transform rotate-90 lg:rotate-0">→</div>
                <div class="bg-gray-800 text-white p-6 rounded-lg shadow-2xl font-mono">
                    Production Code
                </div>
            </div>
             <p class="text-center text-gray-500 mt-4 text-sm">A direct, yet chaotic, path from scattered ideas to live code.</p>
        </section>

        <section id="solution" class="py-16 bg-amber-50 rounded-2xl">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">The Solution: The Unified Code Spec</h3>
                <p class="text-gray-600 max-w-3xl mx-auto">The Code Spec acts as a central hub, synthesizing all artifacts into a single, version-controlled source of truth. It's the living contract that defines the application's behavior, structure, and constraints. Click on a component below to learn more.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-8">
                <div class="component-card bg-white p-6 rounded-lg shadow-md" data-component="ui">
                    <h4 class="font-bold text-lg mb-2">1. UI & User Flows</h4>
                    <p class="text-gray-600 text-sm">Defines the complete user interface, component states, and navigation logic, translating design into executable rules.</p>
                </div>
                <div class="component-card bg-white p-6 rounded-lg shadow-md" data-component="data">
                    <h4 class="font-bold text-lg mb-2">2. Data & State Models</h4>
                    <p class="text-gray-600 text-sm">Describes the shape of data, client-side state management, validation rules, and how data transforms.</p>
                </div>
                <div class="component-card bg-white p-6 rounded-lg shadow-md" data-component="api">
                    <h4 class="font-bold text-lg mb-2">3. API Contracts</h4>
                    <p class="text-gray-600 text-sm">Specifies every endpoint, request/response payload, and error state the frontend will interact with.</p>
                </div>
                <div class="component-card bg-white p-6 rounded-lg shadow-md" data-component="logic">
                    <h4 class="font-bold text-lg mb-2">4. Business & Domain Logic</h4>
                    <p class="text-gray-600 text-sm">Codifies the core business rules and logic that are independent of the UI or specific frameworks.</p>
                </div>
                 <div class="component-card bg-white p-6 rounded-lg shadow-md" data-component="auth">
                    <h4 class="font-bold text-lg mb-2">5. Permissions & Roles</h4>
                    <p class="text-gray-600 text-sm">Details the access control model, defining what different user roles can see and do within the application.</p>
                </div>
                 <div class="component-card bg-white p-6 rounded-lg shadow-md" data-component="non-functional">
                    <h4 class="font-bold text-lg mb-2">6. Non-Functional Specs</h4>
                    <p class="text-gray-600 text-sm">Outlines requirements for performance, accessibility, security, and analytics tracking.</p>
                </div>
            </div>
            
            <div id="component-details" class="bg-white rounded-lg shadow-inner p-8 min-h-[150px] flex items-center justify-center transition-all duration-300">
                <p class="text-gray-500">Select a component to view its details.</p>
            </div>
        </section>

        <section id="ecosystem" class="py-16">
             <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">The Ideal Ecosystem</h3>
                <p class="text-gray-600 max-w-3xl mx-auto">In a spec-driven workflow, artifacts feed into the central specification, which then provides a clear, unambiguous blueprint for development. The spec becomes the bridge between concept and code. Click on any element in the flow to see its role.</p>
            </div>
            <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                <div class="flex space-x-4">
                    <div class="flow-node bg-white p-4 rounded-lg shadow" data-flow="inputs">
                        <span class="font-semibold">PRD & Figma</span>
                    </div>
                </div>
                <div class="text-2xl text-amber-500 font-thin transform rotate-90 md:rotate-0">➔</div>
                <div class="flow-node bg-amber-100 border-2 border-amber-500 p-6 rounded-lg shadow-lg text-amber-900" data-flow="spec">
                    <span class="font-bold text-lg">CODE SPEC</span>
                </div>
                <div class="text-2xl text-amber-500 font-thin transform rotate-90 md:rotate-0">➔</div>
                <div class="flow-node bg-white p-4 rounded-lg shadow" data-flow="code">
                    <span class="font-semibold">Production Code</span>
                </div>
            </div>
            <div id="flow-details" class="mt-8 bg-gray-100 p-6 rounded-lg text-center max-w-2xl mx-auto min-h-[100px] flex items-center justify-center">
                 <p class="text-gray-600">Click a stage in the workflow to learn more.</p>
            </div>
        </section>

        <section id="benefits" class="py-16">
            <div class="text-center mb-12">
                <h3 class="text-3xl font-bold mb-2">Quantifiable Benefits</h3>
                <p class="text-gray-600 max-w-3xl mx-auto">Adopting a code spec dramatically improves key development metrics. Use the toggle below to compare a typical project workflow with a spec-driven workflow.</p>
            </div>
            <div class="flex justify-center mb-8">
                <div class="relative inline-flex items-center p-1 bg-gray-200 rounded-full">
                    <button id="btn-before" class="px-6 py-2 text-sm font-medium text-white bg-amber-600 rounded-full focus:outline-none">Before Spec</button>
                    <button id="btn-after" class="px-6 py-2 text-sm font-medium text-gray-700 bg-transparent rounded-full focus:outline-none">After Spec</button>
                </div>
            </div>
            <div class="chart-container">
                <canvas id="benefitsChart"></canvas>
            </div>
        </section>
    </main>

<script>
document.addEventListener('DOMContentLoaded', () => {

    const componentDetailsContent = {
        'ui': {
            title: 'UI & User Flows',
            text: 'This section translates visual designs (e.g., from Figma) into a structured definition. It includes a component library, state variations (e.g., loading, error, empty), and strict user flow logic. For example, it defines that from the "Login" screen, a successful authentication must always lead to the "Dashboard".'
        },
        'data': {
            title: 'Data & State Models',
            text: 'Defines the `shape` of all client-side data. It specifies types, required fields, and validation rules (e.g., an email must match a specific regex). This ensures data integrity and consistency throughout the application, preventing common bugs related to unexpected data structures.'
        },
        'api': {
            title: 'API Contracts',
            text: 'This serves as a client-side mirror of the backend API documentation (like OpenAPI/Swagger). It details every endpoint, the exact structure of request and response bodies, HTTP methods, and all possible success and error codes. Development can proceed using mock data that adheres to this contract.'
        },
        'logic': {
            title: 'Business & Domain Logic',
            text: 'This captures complex rules that are central to the product\'s value. For example, in an e-commerce app, this section would define the rules for calculating shipping costs, applying discounts, and handling inventory logic. This logic is specified independently of any UI representation.'
        },
        'auth': {
            title: 'Permissions & Roles',
            text: 'Clearly defines user roles (e.g., Admin, Editor, Viewer) and maps them to specific actions or visible UI elements. For instance, it would state that only users with the "Admin" role can see the "Delete User" button. This prevents security holes and clarifies functionality for different user types.'
        },
        'non-functional': {
            title: 'Non-Functional Specs',
            text: 'Covers critical requirements that aren\'t direct features. This includes performance budgets (e.g., "page load must be under 2 seconds"), accessibility standards (e.g., "must be WCAG 2.1 AA compliant"), and security protocols (e.g., "all user input must be sanitized to prevent XSS").'
        }
    };

    const flowDetailsContent = {
        'inputs': {
            title: 'Inputs: PRD & Figma',
            text: 'Product Requirement Documents (PRDs) define the "why" and "what" of a feature. Figma (or other design tools) provides the visual and user experience blueprint. These are the conceptual sources for the spec.'
        },
        'spec': {
            title: 'The Code Spec',
            text: 'The central artifact. It synthesizes the requirements and designs into a detailed, unambiguous technical plan. It becomes the single source of truth that engineers build against. It is version-controlled alongside the code.'
        },
        'code': {
            title: 'Production Code',
            text: 'The final implementation. Because it is built directly from the spec, it accurately reflects the initial requirements and design. The spec serves as a reference for code reviews, testing, and future modifications.'
        }
    };

    const componentCards = document.querySelectorAll('.component-card');
    const detailsContainer = document.getElementById('component-details');

    componentCards.forEach(card => {
        card.addEventListener('click', () => {
            const componentKey = card.dataset.component;
            const content = componentDetailsContent[componentKey];
            detailsContainer.innerHTML = `
                <div class="text-left">
                    <h4 class="font-bold text-xl mb-2 text-amber-700">${content.title}</h4>
                    <p class="text-gray-700">${content.text}</p>
                </div>
            `;
        });
    });

    const flowNodes = document.querySelectorAll('.flow-node');
    const flowDetailsContainer = document.getElementById('flow-details');

    flowNodes.forEach(node => {
        node.addEventListener('click', () => {
            flowNodes.forEach(n => n.classList.remove('active'));
            node.classList.add('active');
            const flowKey = node.dataset.flow;
            const content = flowDetailsContent[flowKey];
            flowDetailsContainer.innerHTML = `
                <div>
                    <h4 class="font-bold text-lg mb-2">${content.title}</h4>
                    <p class="text-gray-600">${content.text}</p>
                </div>
            `;
        });
    });

    const chartData = {
        labels: ['Developer Onboarding Time', 'Feature Clarity', 'Cross-Team Misalignment', 'Bugs from Ambiguity'],
        before: {
            label: 'Before Spec (Lower is Better for Time/Bugs)',
            data: [100, 40, 80, 75],
            backgroundColor: 'rgba(200, 150, 150, 0.6)',
            borderColor: 'rgba(200, 150, 150, 1)',
        },
        after: {
            label: 'After Spec (Higher is Better for Clarity)',
            data: [30, 95, 20, 15],
            backgroundColor: 'rgba(217, 119, 6, 0.6)',
            borderColor: 'rgba(217, 119, 6, 1)',
        }
    };

    const ctx = document.getElementById('benefitsChart').getContext('2d');
    const benefitsChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: chartData.labels,
            datasets: [chartData.before]
        },
        options: {
            indexAxis: 'y',
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                x: {
                    beginAtZero: true,
                    max: 100,
                    title: {
                        display: true,
                        text: 'Relative Score / Effort'
                    }
                }
            },
            plugins: {
                legend: {
                    display: true,
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            let label = context.dataset.label || '';
                            if (label) {
                                label += ': ';
                            }
                            if (context.parsed.x !== null) {
                                label += context.parsed.x + '%';
                            }
                            return label;
                        }
                    }
                }
            }
        }
    });
    
    const btnBefore = document.getElementById('btn-before');
    const btnAfter = document.getElementById('btn-after');
    
    function updateChart(state) {
        if (state === 'before') {
            benefitsChart.data.datasets = [chartData.before];
            btnBefore.classList.add('bg-amber-600', 'text-white');
            btnBefore.classList.remove('bg-transparent', 'text-gray-700');
            btnAfter.classList.remove('bg-amber-600', 'text-white');
            btnAfter.classList.add('bg-transparent', 'text-gray-700');
        } else {
            benefitsChart.data.datasets = [chartData.after];
            btnAfter.classList.add('bg-amber-600', 'text-white');
            btnAfter.classList.remove('bg-transparent', 'text-gray-700');
            btnBefore.classList.remove('bg-amber-600', 'text-white');
            btnBefore.classList.add('bg-transparent', 'text-gray-700');
        }
        benefitsChart.update();
    }
    
    btnBefore.addEventListener('click', () => updateChart('before'));
    btnAfter.addEventListener('click', () => updateChart('after'));

    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section');

    const observerOptions = {
      root: null,
      rootMargin: '0px',
      threshold: 0.4
    };

    const observer = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          navLinks.forEach(link => {
            link.classList.remove('active');
            if (link.getAttribute('href').substring(1) === entry.target.id) {
              link.classList.add('active');
            }
          });
        }
      });
    }, observerOptions);

    sections.forEach(section => {
      observer.observe(section);
    });
});
</script>
</body>
</html>
